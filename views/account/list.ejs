<div class="page-wrapper">
   <% include ../partials/sidebar %>
   <div class="content-wrapper">
      <% include ../partials/navbar %>
      <div class="container-fluid">

         <div class="row mt-4 mb-4">
            <div class="col-md-12">
               <div class="page-title-wrapper">
                  <h4><%= role.charAt(0).toUpperCase() + role.slice(1) %> Account Management</h4>
               </div>
               <a href="/user/create" class="btn btn-primary">Create New Account</a>
            </div>
         </div>
         <div class="row">
            <div class="col-md-12">
               <div class="card">
                  <div class="card-body">
                     <h4 class="header-title">Member Title</h4>
                     <p class="text-muted mb-4">Lorem ipsum, dolor sit amet consectetur adipisicing.</p>
                     <!-- <a href="/account/create" class="btn btn-primary">Create New Account</a> -->
                     <table class="table table-striped">
                        <thead>

                           <th>Email</th>
                           <th>First Name</th>
                           <th>Last Name</th>
                           <th>Registered</th>
                           <th>Action</th>
                        </thead>

                        <% users.forEach( user => { %>
                        <tr>
                           <td><%= user.email %></td>
                           <td><%= user.name.firstName %></td>
                           <td><%= user.name.lastName %></td>
                           <td><%= user.createdDate %></td>
                           <td>
                              <a href="/account/detail/<%= user._id %>"><i class="dripicons-pencil"></i></a>&nbsp;
                              <a href="/account/delete/<%= user._id %>"> <i class="dripicons-trash"></i></a>
                           </td>

                        </tr>
                        <% }); %>
                     </table>
                     <nav>
                        <!-- Pagination -->
                        <% if (pages > 1) { %>
                        <ul class="pagination text-center">

                           <% if (current == 1) { %>
                           <li class="page-item disabled"><a class="page-link">First</a></li>
                           <% } else { %>
                           <li class="page-item"><a class="page-link" href="/account/list/<%= role %>/1">First</a></li>
                           <% } %>

                           <% let i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                           <% if (i !== 1) { %>
                           <li class="disabled page-item"><a class="page-link">...</a></li>
                           <% } %>
                           <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                           <% if (i == current) { %>
                           <li class="active disabled page-item"><a class="page-link"><%= i %></a></li>
                           <% } else { %>
                           <li class="page-item"><a href="/account/list/<%= role %>/<%= i %>"
                                 class="page-link"><%= i %></a></li>
                           <% } %>
                           <% if (i == Number(current) + 4 && i < pages) { %>
                           <li class="disabled page-item"><a class="page-link">...</a></li>
                           <% } %>
                           <% } %>


                           <% if (current == pages) { %>
                           <li class="disabled page-item"><a class="page-link">Last</a></li>
                           <% } else { %>
                           <li class="page-item"><a href="/account/list/<%= role %>/<%= pages %>"
                                 class="page-link">Last</a></li>
                           <% } %>

                        </ul>
                        <% } %>
                     </nav>
                  </div>
               </div>
            </div>
            <!-- Card -->
         </div>
      </div>
      <!-- Row -->
   </div>
</div>